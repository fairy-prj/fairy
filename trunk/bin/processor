#!/usr/bin/env ruby

require "optparse"

require "deep-connect/deep-connect"

require "processor"

Thread.abort_on_exception=true


node_port = nil
id = nil
trace=false
opt = OptionParser.new do |opt|
  opt.on("--node=VAL"){|val| node_port = val}
  opt.on("--id=VAL"){|val| id = val}
  opt.on("--tracer"){ trace = true}
end
opt.parse!(ARGV)

Fairy::Processor.start(id.to_i, node_port)

if trace
   puts "Trace On"
   require "share/tr"
end

sleep

