#!/usr/bin/env ruby
# encoding: UTF-8

require "optparse"

require "deep-connect/deep-connect"

require "fairy/master"

Thread.abort_on_exception = Fairy::CONF.DEBUG_THREAD_ABORT_ON_EXCEPTION
if Fairy::CONF.USE_RESOLV_REPLACE
  require "resolv-replace"
end

#master_host = Fairy::CONF.MASTER_HOST
master_port = Fairy::CONF.MASTER_PORT
opt = OptionParser.new do |opt|
#  opt.on("--master_host=VAL"){|val| master_host = val}
  opt.on("--master_port=VAL"){|val| master_port = val}
end
opt.parse!(ARGV)

Fairy::Master.start(master_port)

sleep
