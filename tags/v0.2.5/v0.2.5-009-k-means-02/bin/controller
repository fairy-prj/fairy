#!/usr/bin/env ruby

require "optparse"

require "deep-connect/deep-connect"

require "controller"

Thread.abort_on_exception=true


master_port = nil
id = nil
opt = OptionParser.new do |opt|
  opt.on("--master=VAL"){|val| master_port = val}
  opt.on("--id=VAL"){|val| id = val}
end
opt.parse!(ARGV)

Fairy::Controller.start(id.to_i, master_port)

puts "Controller Service Start"

sleep
